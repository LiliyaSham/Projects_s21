# Use Case: Обновление расписания мастеров

## Уникальный идентификатор
UC-001-MAN

## Цель (назначение) UC
Обеспечить внесение и корректировку расписаний мастеров в системе для актуализации расписания и минимизации ошибок и трудозатрат, а также для увеличения числа клиентов за счет возможности онлайн-записи.

## Основное действующее лицо
**Менеджер** (роль)

### Интерес (потребность)
Поддержание актуальности расписания для обеспечения эффективной работы барбершопа, во избежание ошибок в записях на услуги и сокращение рутинной работы.

## Другие заинтересованные стороны и их интересы

- **Мастер**  
  *Интерес:* Получение актуального расписания своих услуг для планирования рабочего времени.

- **Клиент / посетитель сайта (зарегистрированный и незарегистрированный)**  
  *Интерес:* Доступ к актуальному расписанию для выбора подходящего времени записи на услуги.

## Предусловия
- Менеджер авторизован в системе.
- В системе зарегистрирован минимум один мастер.

## Триггер
Менеджер решает внести или скорректировать расписание услуг мастеров.

## Постусловия

### Минимальные гарантии
Система сохраняет состояние данных до начала выполнения UC и историю изменений расписания.

### Гарантии успеха
Актуальное расписание услуг мастера обновлено и доступно для просмотра менеджером, мастером, клиентом и посетителем сайта.

## Основной сценарий

1. Менеджер открывает интерфейс управления расписанием.  
2. Система отображает список мастеров.  
3. Менеджер выбирает мастера из списка.  
4. Система отображает текущее расписание выбранного мастера.  
5. Менеджер нажимает иконку «+» для добавления нового слота.  
6. Система открывает форму ввода нового слота в расписание с автоматически заполненным полем «мастер».  
7. Менеджер вводит новые данные в форму:  
   - Дни недели  
   - Время начала и окончания слота  
   - Начальную и конечную дату периода действия  
8. Система проверяет корректность введенных данных и запрашивает подтверждение их сохранения.  
9. Менеджер подтверждает сохранение введенных данных.  
10. Система сохраняет обновленное расписание.  
11. Система подтверждает успешное сохранение расписания.  
12. Система отображает обновленное расписание на странице расписания.  
13. В личном кабинете мастера появляется уведомление об изменении расписания.

## Альтернативные сценарии

### 8a. Некорректный ввод данных
1. Система выдает сообщение об ошибке и просит исправить данные.  
2. Менеджер исправляет данные.  
3. Система повторно проверяет данные.  
   → Возврат на шаг 8 основного сценария или повтор шага 8a.1 при новой ошибке.

### 9b. Отмена операции
1. Менеджер нажимает кнопку «Отмена» на шаге 9 основного сценария.  
2. Система не сохраняет изменения.  
3. Система возвращает менеджера к предыдущему экрану.

## Дополнительно

### Предположения
- При вводе расписания не указывается конкретная услуга, так как клиент / посетитель сайта может выбрать любую услугу, выполняемую данным мастером, при наличии свободного слота у мастера.
- Форма ввода расписания содержит следующие поля:  
  - Мастер  
  - День недели  
  - Время начала / окончания слота  
  - Дата начала действия расписания  
  - Дата окончания действия расписания  
  - Рабочее место  
- Редактировать расписание можно через страницу расписания и через карточку мастера.

## Бизнес-правила
- У каждой услуги есть минимальное время выполнения. Система не позволяет записаться на услугу, если свободный слот мастера короче, чем время, необходимое на оказание услуги.
- За каждым мастером закреплено рабочее место. Одно рабочее место может использоваться несколькими мастерами по очереди.
- У каждого филиала есть свое расписание. Система в один момент времени отображает расписание только одного филиала.

## Ограничения
- При вводе расписания система проверяет наличие свободного рабочего места для мастера на указанное время. Если места нет — выдается сообщение об ошибке.
- Мастер не может быть назначен на одно и то же время на нескольких рабочих местах.
- Время работы мастера должно соответствовать рабочим часам барбершопа.
